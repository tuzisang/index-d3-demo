/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/cytoscape-edgehandles@3.5.0/cytoscape-edgehandles.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash.memoize"),require("lodash.throttle")):"function"==typeof define&&define.amd?define(["lodash.memoize","lodash.throttle"],t):"object"==typeof exports?exports.cytoscapeEdgehandles=t(require("lodash.memoize"),require("lodash.throttle")):e.cytoscapeEdgehandles=t(e._.memoize,e._.throttle)}(this,(function(e,t){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}([function(e,t,i){"use strict";e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.filter((function(e){return null!=e})).forEach((function(t){Object.keys(t).forEach((function(i){return e[i]=t[i]}))})),e}},function(e,t,i){"use strict";var n=i(10),s=i(0);e.exports=function(e){return new n(s({cy:this},e))}},function(e,t,i){"use strict";e.exports={disableGestures:function(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var e=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,e),window.addEventListener("touchmove",this.preventDefault,e),window.addEventListener("wheel",this.preventDefault,e)}return this},resetGestures:function(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var e=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,e),window.removeEventListener("touchmove",this.preventDefault,e),window.removeEventListener("wheel",this.preventDefault,e)}return this},saveGestureState:function(){var e=this.cy;return this.lastPanningEnabled=e.panningEnabled(),this.lastZoomingEnabled=e.zoomingEnabled(),this.lastBoxSelectionEnabled=e.boxSelectionEnabled(),this}}},function(e,t,i){"use strict";e.exports={addCytoscapeListeners:function(){var e=this,t=this.cy,i=this.options;return this.addListener(t,"drag",(function(){return e.grabbingNode=!0})),this.addListener(t,"free",(function(){return e.grabbingNode=!1})),this.addListener(t,"mouseover","node",(function(t){e.show(t.target)})),this.addListener(t,"tap","node",(function(t){var i=t.target;i.same(e.handleNode)||e.show(i)})),this.addListener(t,"position","node",(function(t){t.target.same(e.sourceNode)&&e.hide()})),this.addListener(t,"tapstart","node",(function(t){var i=t.target;i.same(e.handleNode)?e.start(e.sourceNode):e.drawMode?e.start(i):i.same(e.sourceNode)&&e.hide()})),this.addListener(t,"tapdrag",(function(t){e.update(t.position)})),this.addListener(t,"tapdragover","node",(function(t){e.preview(t.target)})),this.addListener(t,"tapdragout","node",(function(t){i.snap&&t.target.same(e.targetNode)||e.unpreview(t.target)})),this.addListener(t,"tapend",(function(){e.stop()})),this.addListener(t,"remove",(function(t){t.target.same(e.sourceNode)&&e.hide()})),this}}},function(e,t,i){"use strict";e.exports={preview:!0,hoverDelay:150,handleNodes:"node",snap:!1,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!1,disableBrowserGestures:!0,handlePosition:function(e){return"middle top"},handleInDrawMode:!1,edgeType:function(e,t){return"flat"},loopAllowed:function(e){return!1},nodeLoopOffset:-50,nodeParams:function(e,t){return{}},edgeParams:function(e,t,i){return{}},ghostEdgeParams:function(){return{}},show:function(e){},hide:function(e){},start:function(e){},complete:function(e,t,i){},stop:function(e){},cancel:function(e,t){},hoverover:function(e,t){},hoverout:function(e,t){},previewon:function(e,t,i){},previewoff:function(e,t,i){},drawon:function(){},drawoff:function(){}}},function(e,t,i){"use strict";e.exports={toggleDrawMode:function(e){var t=this.cy,i=this.options;return this.drawMode=null!=e?e:!this.drawMode,this.drawMode?(this.prevUngrabifyState=t.autoungrabify(),t.autoungrabify(!0),!i.handleInDrawMode&&this.handleShown()&&this.hide(),this.emit("drawon")):(t.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function(){return this.toggleDrawMode(!0)},disableDrawMode:function(){return this.toggleDrawMode(!1)}}},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=i(0);function o(e,t,i){var o,r={};return s(r,t,e),s(r.data,t.data,e.data),(void 0===(o=t.classes)?"undefined":n(o))===n("")?r.classes=t.classes+" "+i:!function(e){return(void 0===e?"undefined":n(e))===n([])&&null!=e.length}(t.classes)?r.classes=i:r.classes=t.classes.join(" ")+" "+i,r}e.exports={makeEdges:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy,i=this.options,n=this.presumptiveTargets,s=this.previewEles,r=this.active,a=this.sourceNode,h=this.targetNode,d=e?"eh-preview":"",u=t.collection(),c=i.edgeType(a,h);if(r&&c&&(!e||i.preview)){if(!h||0===h.size())return s.remove(),void this.emit("cancel",this.mp(),a,n);if(!e&&i.preview)return s.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),a,h,s);var l=a.position(),p=h.position(),v=void 0;if(v=a.same(h)?{x:l.x+i.nodeLoopOffset,y:l.y+i.nodeLoopOffset}:{x:(l.x+p.x)/2,y:(l.y+p.y)/2},"node"===c){var f=t.add(o({group:"nodes",position:v,style:{events:"no"}},i.nodeParams(a,h),d)),m=t.add(o({group:"edges",data:{source:a.id(),target:f.id()},style:{events:"no"}},i.edgeParams(a,h,0),d)),g=t.add(o({group:"edges",data:{source:f.id(),target:h.id()},style:{events:"no"}},i.edgeParams(a,h,1),d));u=u.merge(f).merge(m).merge(g)}else{var y=t.add(o({group:"edges",data:{source:a.id(),target:h.id()},style:{events:"no"}},i.edgeParams(a,h,0),d));u=u.merge(y)}return e?this.previewEles=u:(u.style("events",""),this.emit("complete",this.mp(),a,h,u)),this}},makePreview:function(){return this.makeEdges(!0),this},removePreview:function(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function(){var e=this,t=this.sourceNode,i=this.ghostNode,n=this.cy,o=this.mx,r=this.my,a=this.options,h=o,d=r,u=void 0,c=void 0;if(t)return i&&0!==i.length&&!i.removed()||(c=this.ghostEles=n.collection(),n.batch((function(){(i=e.ghostNode=n.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var o=a.ghostEdgeParams();(u=n.add(s({},o,{group:"edges",data:s({},o.data,{source:t.id(),target:i.id()})}))).addClass("eh-ghost eh-ghost-edge"),u.style({events:"no"})})),c.merge(i).merge(u)),i.position({x:h,y:d}),this},handleShown:function(){return this.handleNode.nonempty()&&this.handleNode.inside()},setHandleFor:function(e){var t=this,i=this.options,s=this.cy,o=n(i.handlePosition)===n("")?function(){return i.handlePosition}:i.handlePosition,r=e.position(),a=e.outerHeight(),h=e.outerWidth(),d=0,u=0,c=o(e).toLowerCase().split(/\s+/),l=c[0],p=c[1];"left"===l?d=-h/2:"right"===l&&(d=h/2),"top"===p?u=-a/2:"bottom"===p&&(u=a/2);var v={x:this.hx=r.x+d,y:this.hy=r.y+u};return this.handleShown()?this.handleNode.position(v):s.batch((function(){t.handleNode=s.add({classes:"eh-handle",position:v,grabbable:!1,selectable:!1}),t.handleNode.style("z-index",9007199254740991)})),this},removeHandle:function(){return this.handleShown()&&this.handleNode.remove(),this}}},function(e,t,i){"use strict";e.exports={disableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(e,t,i){"use strict";e.exports={enable:function(){return this.enabled=!0,this.emit("enable"),this},disable:function(){return this.enabled=!1,this.emit("disable"),this}}},function(e,t,i){"use strict";var n=i(13);e.exports={show:function(e){var t=this.options,i=this.drawMode;if(this.canStartOn(e)&&(!i||t.handleInDrawMode))return this.sourceNode=e,this.setHandleFor(e),this.emit("show",this.hp(),this.sourceNode),this},hide:function(){return this.removeHandle(),this.emit("hide",this.hp(),this.sourceNode),this},start:function(e){this.canStartOn(e)&&(this.active=!0,this.sourceNode=e,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents(),this.emit("start",this.hp(),e))},update:function(e){if(this.active){var t=e;return this.mx=t.x,this.my=t.y,this.updateEdge(),this.throttledSnap(),this}},preview:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.options,s=this.sourceNode,o=this.ghostNode,r=this.ghostEles,a=this.presumptiveTargets,h=this.previewEles,d=this.active,u=s,c=e.same(u),l=n.loopAllowed(e),p=e.same(o),v=!n.edgeType(u,e),f=e.same(this.handleNode),m=e.same(this.targetNode);if(!d||f||p||v||m||c&&!l)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var g=function(){t.targetNode=e,a.merge(e),e.addClass("eh-presumptive-target"),e.addClass("eh-target"),t.emit("hoverover",t.mp(),u,e),n.preview&&(e.addClass("eh-preview"),r.addClass("eh-preview-active"),s.addClass("eh-preview-active"),e.addClass("eh-preview-active"),t.makePreview(),t.emit("previewon",t.mp(),u,e,h))};return i&&n.hoverDelay>0?this.previewTimeout=setTimeout(g,n.hoverDelay):g(),!0},unpreview:function(e){if(this.active&&!e.same(this.handleNode)){var t=this.previewTimeout,i=this.sourceNode,n=this.previewEles,s=this.ghostEles,o=this.cy;clearTimeout(t),this.previewTimeout=null;var r=i;return e.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),s.removeClass("eh-preview-active"),i.removeClass("eh-preview-active"),this.targetNode=o.collection(),this.removePreview(r,e),this.emit("hoverout",this.mp(),r,e),this.emit("previewoff",this.mp(),r,e,n),this}},stop:function(){if(this.active){var e=this.sourceNode,t=this.targetNode,i=this.ghostEles,n=this.presumptiveTargets;return clearTimeout(this.previewTimeout),e.removeClass("eh-source"),t.removeClass("eh-target eh-preview eh-hover"),n.removeClass("eh-presumptive-target"),this.makeEdges(),this.removeHandle(),i.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),e),this}},snap:function(){if(!this.active||!this.options.snap)return!1;var e=this.cy,t=this.targetNode,i=this.options.snapThreshold,s=this.mp(),o=function(e){return(e.outerWidth()+e.outerHeight())/4},r=n((function(e){return t=e.position(),((i=s).x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);var t,i}),(function(e){return e.id()})),a=function(e){return r(e)<=function(e){var t=o(e)+i;return t*t}(e)},h=e.nodes(a).sort((function(e,t){return r(e)-r(t)})),d=!1;t.nonempty()&&!a(t)&&this.unpreview(t);for(var u=0;u<h.length;u++){var c=h[u];if(c.same(t)||this.preview(c,false)){d=!0;break}}return d},canStartOn:function(e){var t,i=this.options,n=this.previewEles,s=this.ghostEles,o=this.handleNode,r=this.enabled,a=this.active,h=this.grabbingNode;return r&&!a&&!h&&(null==e||!(function(e){return n.anySame(e)}(t=e)||function(e){return o.same(e)}(t)||function(e){return s.anySame(e)}(t))&&function(e){return e.filter(i.handleNodes).length>0}(e))},canStartDrawModeOn:function(e){return this.canStartOn(e)&&this.drawMode},canStartNonDrawModeOn:function(e){return this.canStartOn(e)&&!this.drawMode}}},function(e,t,i){"use strict";var n=i(4),s=i(0),o=i(14),r=i(2),a=i(3),h=i(5),d=i(6),u=i(8),c=i(9),l=i(11),p=i(7);function v(e){var t=e.cy;this.cy=t,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.handleNode=t.collection(),this.clearCollections(),this.hx=0,this.hy=0,this.hr=0,this.mx=0,this.my=0,this.options=s({},n,e),this.saveGestureState(),this.addListeners(),this.throttledSnap=o(this.snap.bind(this),1e3/e.snapFrequency),this.preventDefault=function(e){return e.preventDefault()};var i=!1;try{var r=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,r)}catch(e){}this.windowListenerOptions=!i||{capture:!0,passive:!1}}var f=v.prototype={};f.destroy=function(){this.removeListeners()},f.setOptions=function(e){s(this.options,e)},f.mp=function(){return{x:this.mx,y:this.my}},f.hp=function(){return{x:this.hx,y:this.hy}},f.clearCollections=function(){var e=this.cy;this.previewEles=e.collection(),this.ghostEles=e.collection(),this.ghostNode=e.collection(),this.sourceNode=e.collection(),this.targetNode=e.collection(),this.presumptiveTargets=e.collection()},[r,a,h,d,u,c,l,p].forEach((function(e){return s(f,e)})),e.exports=v},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e,t,i,s,o){return(void 0===i?"undefined":n(i))!==n("")&&(o=s=i,i=null),null==o&&(o=!1),{target:e,event:t,selector:i,callback:s,options:o}}function o(e){return e instanceof Element}e.exports={addListener:function(e,t,i,n,r){var a=s(e,t,i,n,r);return this.listeners.push(a),o(a.target)?a.target.addEventListener(a.event,a.callback,a.options):a.selector?a.target.addListener(a.event,a.selector,a.callback,a.options):a.target.addListener(a.event,a.callback,a.options),this},addListeners:function(){var e=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",(function(){return e.destroy()})),this},removeListener:function(e,t,i,n,r){for(var a=s(e,t,i,n,r),h=this.listeners.length-1;h>=0;h--){var d=this.listeners[h];if(!(a.target!==d.target||a.event!==d.event||null!=a.selector&&a.selector!==d.selector||null!=a.callback&&a.callback!==d.callback)){this.listeners.splice(h,1),o(a.target)?a.target.removeEventListener(a.event,a.callback,a.options):a.selector?a.target.removeListener(a.event,a.selector,a.callback,a.options):a.target.removeListener(a.event,a.callback,a.options);break}}return this},removeListeners:function(){for(var e=this.listeners.length-1;e>=0;e--){var t=this.listeners[e];this.removeListener(t.target,t.event,t.selector,t.callback,t.options)}return this},emit:function(e,t){for(var i=this.options,n=this.cy,s=arguments.length,o=Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];n.emit({type:"eh"+e,position:t},o);var a=i[e];return null!=a&&a.apply(void 0,o),this}}},function(e,t,i){"use strict";var n=i(1),s=function(e){e&&e("core","edgehandles",n)};"undefined"!=typeof cytoscape&&s(cytoscape),e.exports=s},function(t,i){t.exports=e},function(e,i){e.exports=t}])}));
//# sourceMappingURL=/sm/e0f43f47f2d10d3343c5b2b353473bb3f6e1c3a83b8e44ab1c267417bff40809.map